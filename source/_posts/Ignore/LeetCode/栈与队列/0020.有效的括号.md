---
title: 0020.有效的括号
date: " 2024-08-31 12:18 "
description: 
cover: https://raw.githubusercontent.com/shigure-no-wokka/pic_bed/main/imgs/family_code.jpg
categories: Code
tags:
  - LeetCode
  - 栈
---

题目链接：[0020.有效的括号](https://leetcode.cn/problems/valid-parentheses/description/)

给定一个只包括 `'('`，`')'`，`'{'`，`'}'`，`'['`，`']'` 的字符串 `s` ，判断字符串是否有效。

有效字符串需满足：

1. 左括号必须用相同类型的右括号闭合。
2. 左括号必须以正确的顺序闭合。
3. 每个右括号都有一个对应的相同类型的左括号

**示例 1：**

**输入：**s = " ()"
**输出：**true

**示例 2：**

**输入：**s = " ()[]{}"
**输出：**true

**示例 3：**

**输入：**s = " (]"
**输出：**false

**提示：**
- `1 <= s.length <= 104`
- `s` 仅由括号 `'()[]{}'` 组成

<!--more-->

---

# 题解

对括号字符串进行分析，如果一个括号字符串是有效的，那么从左往后开始数，遇到第一个右括号之前部分的最后一个左括号，应当和这个第一个右括号是匹配的。

如果匹配，那么这个字符串长度必定是偶数，所以可以有一个简单的判断条件：

```cpp
size_t len = s.length();
if(len % 2) return false;
```

对于长度为偶数的字符串，如果用栈来理解，就是遍历字符串字符
- 左括号入栈
- 右括号就和栈顶元素比较
	- 不匹配，说明括号字符串无效
	- 匹配，就弹出栈顶元素继续遍历后续括号

```cpp
stack<char> stk;
for(size_t i=0; i<len; i++)
{
	// 遇到左括号的时候
	if(s[i]=='(') stk.push(')'); // 放右括号进去，比较的时候直接比较相等即可
	else if(s[i]=='[') stk.push(']');
	else if(s[i]=='{') stk.push('}');
	// 接下来是遇到右括号的时候
	else if(stk.empty() || s[i]!=stk.top()) return false; // 还在遍历字符串结果栈空了，或者右括号和栈顶不匹配，都说明字符串无效
	else stk.pop(); // 到这里说明找到了匹配的括号，弹出栈顶
}
```

在上边的代码中，只考虑了字符串还没遍历完，栈就空了的情况，说明有右括号没有匹配上左括号。实际上还有可能是字符串遍历完了，但是栈不为空，说明有左括号没有匹配的右括号。

```cpp
return stk.empty(); // 这里已经是for循环外了，如果stk为空，stk.empty()==true，就是正常匹配完毕；如果stk不为空,stk.empty()==false，就是上边讨论的第二种左括号没有匹配完成
```


复杂度分析：需要对字符串进行遍历，也需要额外的空间存放字符，所以时间和空间复杂度都是 $O(n)$





